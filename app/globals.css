:root {
  --bg-0: #0a0b0d;
  --bg-1: #101215;
  --text: #e9eaec;
  --muted: #a3a9b3;
  --neon-1: #d4ff00;
  --neon-2: #00ff66;
  --danger: #ff5a5a;
  --card: #15171a;
  --border: #202228;
  --shadow-0: rgba(0,0,0,.45);
  --shadow-1: rgba(0,0,0,.30);
}

html, body {
  height: 100%;
  margin: 0;
  background:
    radial-gradient(900px at 12% -20%, #0f1114 0%, var(--bg-1) 65%),
    linear-gradient(180deg, var(--bg-0), var(--bg-1));
  color: var(--text);
  font-family: Inter, "SF Pro Display", "Segoe UI", Roboto, system-ui, -apple-system;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

.container { max-width: 1140px; margin: 0 auto; padding: 18px; }

/* Брендинг */
.tox-brand {
  position: fixed; top: 20px; left: 22px; z-index: 50;
  font-weight: 900; letter-spacing: .14em; text-transform: lowercase;
  background: linear-gradient(90deg, var(--neon-1), var(--neon-2));
  -webkit-background-clip: text; background-clip: text; color: transparent;
  filter: drop-shadow(0 0 10px rgba(0,255,102,.25));
  font-size: 24px;
  border: none; cursor: pointer;
}
.tox-brand-animated { animation: glowPulse 3.8s ease-in-out infinite; }
.tox-brand-static { animation: none; }
@keyframes glowPulse { 0%,100% { filter: drop-shadow(0 0 6px rgba(0,255,102,.2)); } 50% { filter: drop-shadow(0 0 18px rgba(0,255,102,.45)); } }

/* Карточки */
.card { background: linear-gradient(180deg, #15171a, #101215); border: 1px solid var(--border); border-radius: 18px; padding: 18px; box-shadow: 0 12px 40px var(--shadow-0); }
.grid-header { margin-bottom: 16px; }
.grid-title { font-size: 20px; font-weight: 900; letter-spacing: .02em; }
.grid-subtitle { color: var(--muted); font-size: 13px; }

/* Tabs */
.tabs { display: flex; gap: 8px; margin-bottom: 14px; }
.tab { background: #121317; border: 1px solid var(--border); color: var(--text); border-radius: 999px; padding: 8px 12px; font-size: 12px; font-weight: 700; }
.tab--active { background: linear-gradient(135deg, var(--neon-1), var(--neon-2)); color: #0a0a0a; border: none; }

/* Кнопки/инпуты — фикс чёрных кнопок: жёстко задаём градиент */
.tox-button {
  background: linear-gradient(135deg, #d4ff00, #00ff66);
  color: #0a0a0a;
  border-radius: 14px;
  padding: 12px 16px;
  font-weight: 800;
  letter-spacing: .02em;
  transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
}
.tox-button:hover { transform: translateY(-2px); box-shadow: 0 12px 28px rgba(0,255,102,.18); filter: brightness(1.02); }
.tox-button:disabled { opacity: .5; cursor: not-allowed; }
.tox-button--sm { padding: 8px 10px; font-size: 12px; }

.input { background: #121317; color: var(--text); border: 1px solid var(--border); border-radius: 12px; padding: 12px; font-weight: 700; }
.input:focus { outline: none; border-color: var(--neon-2); box-shadow: 0 0 0 3px rgba(0,255,102,.15); }

.label { color: var(--muted); font-size: 12px; margin-bottom: 6px; }
.actions { margin-top: 16px; display: flex; gap: 12px; align-items: center; }
.hint-error { color: var(--danger); font-size: 12px; }

/* Авторизация */
.auth-card { background: linear-gradient(180deg, #17191d, #101215); border: 1px solid var(--border); border-radius: 18px; padding: 20px; box-shadow: 0 14px 44px var(--shadow-0); max-width: 520px; margin: 24px auto; }
.auth-header { margin-bottom: 12px; }
.auth-title { font-size: 22px; font-weight: 900; letter-spacing: .02em; }
.auth-subtitle { color: var(--muted); font-size: 13px; }
.auth-fields { display: grid; gap: 12px; margin-top: 8px; }
.field { display: grid; gap: 6px; }
.field-label { color: var(--muted); font-size: 12px; }
.auth-actions { display: flex; gap: 12px; align-items: center; margin-top: 14px; }
.auth-hint { color: var(--muted); font-size: 12px; }

/* Сетка устройств */
.devices-grid-wrapper { position: relative; min-height: 60vh; }
@media (min-width: 992px) { .devices-grid-wrapper { min-height: 72vh; } }
.devices-grid { display: grid; grid-template-columns: repeat(8, 1fr); gap: 12px; }
@media (max-width: 1200px) { .devices-grid { grid-template-columns: repeat(6, 1fr); } }
@media (max-width: 992px) { .devices-grid { grid-template-columns: repeat(5, 1fr); } }
@media (max-width: 768px) { .devices-grid { grid-template-columns: repeat(4, 1fr); } }
@media (max-width: 480px) { .devices-grid { grid-template-columns: repeat(3, 1fr); } }

/* Карточки устройств — чистая типографика */
.device-tile {
  position: relative; aspect-ratio: 1 / 1;
  border-radius: 16px; border: 1px solid var(--border);
  background: #121317; box-shadow: 0 8px 22px var(--shadow-1);
  display: flex; align-items: center; justify-content: center;
  padding: 10px; cursor: pointer; overflow: hidden;

  transform-style: preserve-3d;
  perspective: 700px;
  will-change: transform;
  backface-visibility: hidden;
  --tiltX: 0deg; --tiltY: 0deg;
  transform: rotateX(var(--tiltX)) rotateY(var(--tiltY));
  transition: transform .10s ease, box-shadow .16s ease, border-color .16s ease;
}
.device-tile:hover { box-shadow: 0 16px 40px rgba(0,255,102,.2); border-color: #2a2d34; }
.device-tile::after {
  content: ""; position: absolute; inset: 0;
  background: radial-gradient(260px at var(--glowX, 50%) var(--glowY, 50%), rgba(0,255,102,.10), transparent 60%);
  pointer-events: none; transition: background-position .08s ease;
}
.device-image-bg { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; filter: saturate(1.02) brightness(.98); transform: translateZ(0); }
.device-tile__label { font-weight: 900; font-size: 16px; letter-spacing: .01em; text-align: center; transform: translateZ(0.5px); text-shadow: 0 0 1px rgba(0,0,0,.25); -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; text-rendering: optimizeLegibility; }
.device-tile__badge { position: absolute; top: 8px; left: 8px; font-size: 11px; font-weight: 800; color: #0a0a0a; border-radius: 999px; padding: 5px 9px; background: linear-gradient(135deg, var(--neon-1), var(--neon-2)); transform: translateZ(0.5px); }
.device-dot { position: absolute; top: 10px; right: 10px; width: 8px; height: 8px; border-radius: 999px; transform: translateZ(0.5px); }
.device-dot--ok { background: linear-gradient(135deg,#8fff00,#00ff66); box-shadow: 0 0 6px rgba(0,255,102,.35); }
.device-dot--bad { background: #ff5a5a; }

.specs-btn { position: absolute; top: 8px; right: 8px; font-size: 11px; font-weight: 800; letter-spacing: .04em; color: var(--text); background: rgba(255,255,255,.06); border: 1px solid var(--border); border-radius: 999px; padding: 6px 10px; transform: translateZ(0.5px); backdrop-filter: blur(4px); transition: background .12s ease, border-color .12s ease; }
.specs-btn:hover { background: rgba(255,255,255,.1); border-color: #2a2d34; }

.specs-panel { position: absolute; top: 0; right: 0; width: 0; opacity: 0; transition: width .22s ease, opacity .22s ease; overflow: hidden; }
.specs-panel--open { width: min(420px, 95vw); opacity: 1; }
.specs-content { height: 100%; background: #14161a; border-left: 1px solid var(--border); box-shadow: -10px 0 30px var(--shadow-0); padding: 16px; }
.specs-title { font-weight: 900; margin-bottom: 8px; }
.mt-3 { margin-top: 12px; }
.specs-row { display: grid; grid-template-columns: 120px 1fr; align-items: center; background: rgba(255,255,255,.03); border: 1px solid var(--border); border-radius: 10px; padding: 8px 10px; margin-bottom: 8px; gap: 8px; }
.specs-row span { color: #b5b9bf; font-weight: 800; }

.device-tile--busy::before { content: ""; position: absolute; inset: 0; background: linear-gradient(180deg, rgba(255,120,120,.10), transparent); pointer-events: none; }
.device-tile--booked { filter: grayscale(.15) saturate(.96) brightness(.96); }
.device-tile--booked::before { content: ""; position: absolute; inset: 0; background: rgba(255,80,80,.16); backdrop-filter: blur(1.2px); pointer-events: none; }
.device-lock { position: absolute; bottom: 8px; right: 8px; font-size: 14px; transform: translateZ(0.5px); }

.device-tile--std { background: linear-gradient(180deg, #181a1e, #121317); }
.device-tile--vip { background: radial-gradient(140px at 80% 20%, rgba(212,255,0,.16), rgba(0,255,102,.16)), linear-gradient(180deg, #181a1e, #121317); background-blend-mode: screen; }
.device-tile--ps5 { background: radial-gradient(140px at 20% 80%, rgba(160,180,255,.16), rgba(45,88,255,.16)), linear-gradient(180deg, #181a1e, #121317); background-blend-mode: screen; }

/* Pro‑ползунок: рабочие указатели и touch */
.slider {
  --h: 100px;
  position: relative; background: #121317; border: 1px solid var(--border); border-radius: 16px; height: var(--h); box-shadow: 0 10px 26px var(--shadow-1); overflow: hidden;
  touch-action: none; /* критично для тача */
}
.slider__grid { position: absolute; inset: 0; display: grid; grid-template-columns: repeat(24,1fr); }
.slider__hour { border-right: 1px solid #1b1d22; position: relative; }
.slider__hour::after { content: attr(data-label); position: absolute; bottom: 6px; left: 8px; font-size: 11px; color: var(--muted); }
.slider__busy { position: absolute; top: 0; bottom: 0; background: rgba(255,80,80,.13); }
.slider__range { position: absolute; top: 18px; bottom: 18px; border-radius: 14px; background: linear-gradient(135deg, var(--neon-1), var(--neon-2)); box-shadow: 0 0 26px rgba(0,255,102,.35); transition: left .18s ease, width .18s ease; }
.slider__handle { position: absolute; top: 12px; bottom: 12px; width: 34px; border-radius: 999px; background: radial-gradient(circle at 30% 30%, var(--neon-1), var(--neon-2)); box-shadow: 0 0 22px rgba(0,255,102,.55); transform: translateZ(0); }
.slider__tooltip { position: absolute; top: 6px; transform: translateX(-50%); font-size: 11px; font-weight: 800; color: var(--text); background: rgba(0,0,0,.35); border: 1px solid var(--border); border-radius: 8px; padding: 4px 6px; backdrop-filter: blur(4px); }
.slider input[type="range"] { position: absolute; inset: 0; opacity: 0; cursor: pointer; }

/* Календарь */
.calendar {}
.calendar__panel { margin-top: 8px; background: #14161a; border: 1px solid var(--border); border-radius: 16px; padding: 12px; box-shadow: 0 12px 40px var(--shadow-0); }
.calendar__header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 6px; }
.calendar__title { font-weight: 900; letter-spacing: .02ем; }
.calendar__week { display: grid; grid-template-columns: repeat(7,1fr); gap: 6px; color: var(--muted); font-size: 12px; }
.calendar__weekday { text-align: center; }
.calendar__grid { display: grid; grid-template-columns: repeat(7,1fr); gap: 6px; margin-top: 6px; }
.calendar__day { background: #121317; border: 1px solid var(--border); color: var(--text); border-radius: 12px; padding: 12px; min-height: 46px; font-weight: 800; transition: transform .08s ease, box-shadow .08s ease, border-color .08s ease; }
.calendar__day:hover { transform: translateY(-1px); box-shadow: 0 8px 18px rgba(0,255,102,.12); border-color: #2a2d34; }
.calendar__day--active { background: linear-gradient(135deg, var(--neon-1), var(--neon-2)); color: #0a0a0a; border: none; }

/* Toast */
.toast { position: fixed; bottom: 16px; left: 50%; transform: translateX(-50%); padding: 10px 14px; border-radius: 12px; color: #0a0a0a; font-weight: 800; box-shadow: 0 10px 28px var(--shadow-0); z-index: 50; animation: fadeIn .15s ease; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(4px); } to { opacity: 1; transform: translateY(0); } }

/* Мобайл */
@media (max-width: 768px) {
  .container { padding: 14px; }
  .card { border-radius: 16px; padding: 14px; }
  .tox-brand { font-size: 20px; }
  .devices-grid { gap: 10px; }
  .device-tile { border-radius: 14px; }
  .specs-panel--open { width: 100%; }
  .slider { --h: 110px; }
}
/* Loader */
.loader-screen {
  position: fixed; inset: 0;
  background: #0a0b0d;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  z-index: 9999;
  animation: fadeIn .3s ease;
}

.loader-logo {
  font-size: 32px;
  font-weight: 900;
  background: linear-gradient(90deg, var(--neon-1), var(--neon-2));
  -webkit-background-clip: text;
  color: transparent;
  animation: pulse 1.8s infinite;
  margin-bottom: 24px;
}

@keyframes pulse {
  0%,100% { transform: scale(1); opacity: .9; }
  50% { transform: scale(1.1); opacity: 1; }
}

.loader-bar {
  width: 60%; height: 12px;
  background: #121317;
  border-radius: 999px;
  overflow: hidden;
  border: 1px solid var(--border);
}
.loader-bar__fill {
  height: 100%;
  background: linear-gradient(135deg, var(--neon-1), var(--neon-2));
  transition: width .2s ease;
}

/* Адаптация под телефоны */
@media (max-width: 480px) {
  .tox-button { width: 100%; font-size: 14px; padding: 14px; }
  .tabs { flex-wrap: wrap; justify-content: center; }
  .devices-grid { grid-template-columns: repeat(2, 1fr); }
  .card { padding: 12px; }
  .grid-title { font-size: 18px; }
}

/* Анимация появления карточек */
.device-tile {
  animation: fadeInUp .4s ease both;
}
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Glow для VIP */
.device-tile--vip {
  border: 1px solid transparent;
  background-image: linear-gradient(#121317, #121317),
    linear-gradient(135deg, var(--neon-1), var(--neon-2));
  background-origin: border-box;
  background-clip: content-box, border-box;
}

/* Blur для карточек */
.card {
  backdrop-filter: blur(6px);
}
.mobile-nav {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  background: #101215;
  border-top: 1px solid var(--border);
  display: flex;
  justify-content: space-around;
  padding: 8px 0;
  z-index: 1000;
}

.mobile-nav__btn {
  flex: 1;
  background: none;
  border: none;
  color: var(--muted);
  font-size: 14px;
  font-weight: 700;
  padding: 8px 0;
}

.mobile-nav__btn.active {
  color: var(--neon-2);
}
/* Фикс логотипа */
.tox-brand {
  position: fixed;
  top: 12px; left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
  font-size: 22px;
}

/* Мобильная адаптация */
@media (max-width: 768px) {
  .container { padding: 12px; }
  .card { border-radius: 14px; padding: 12px; }
  .tox-button { width: 100%; font-size: 15px; padding: 14px; }
  .tabs { flex-wrap: wrap; justify-content: center; gap: 6px; }
  .devices-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; }
  .grid-title { font-size: 18px; text-align: center; }
  .grid-subtitle { font-size: 12px; text-align: center; }
  .slider { width: 100%; margin-top: 12px; }
  .calendar__panel { width: 100%; }
}

/* Bottom nav фиксируем */
.mobile-nav {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  background: #101215;
  border-top: 1px solid var(--border);
  display: flex;
  justify-content: space-around;
  padding: 8px 0;
  z-index: 1000;
}
/* Безопасные области для телефона */
:root {
  --safe-top: env(safe-area-inset-top);
  --safe-bottom: env(safe-area-inset-bottom);
  --neon-1: #5af1b0;
  --neon-2: #4bd1ff;
  --border: #1c1f26;
  --muted: #a0a6b3;
}
/* Фикс верхней панели и логотипа */
.topbar {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 56px;
  padding-top: env(safe-area-inset-top);
  background: #0a0b0d;
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; justify-content: center;
  z-index: 1000;
}
.tox-brand {
  font-weight: 900; font-size: 20px;
  background: linear-gradient(90deg, var(--neon-1), var(--neon-2));
  -webkit-background-clip: text; color: transparent;
}

/* Контент с безопасными отступами */
.content {
  padding-top: calc(56px + env(safe-area-inset-top));
  padding-bottom: calc(64px + env(safe-area-inset-bottom));
}

/* Нижняя навигация */
.mobile-nav {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  background: #101215;
  border-top: 1px solid var(--border);
  display: flex; justify-content: space-around;
  padding: 8px 0;
  z-index: 1000;
  padding-bottom: env(safe-area-inset-bottom);
}
.mobile-nav__btn {
  flex: 1;
  background: none; border: none;
  color: var(--muted);
  font-size: 14px; font-weight: 700;
  padding: 8px 0;
}
.mobile-nav__btn.active { color: var(--neon-2); }

/* Мобильная адаптация */
@media (max-width: 768px) {
  .devices-grid { grid-template-columns: repeat(2, 1fr); }
  .card { border-radius: 14px; padding: 12px; }
  .tox-button { width: 100%; font-size: 15px; padding: 14px; }
  .tabs { flex-wrap: wrap; justify-content: center; gap: 6px; }
  .grid-title, .grid-subtitle { text-align: center; }
  .booking-grid { grid-template-columns: 1fr; }
}
/* Preset buttons */
.preset-buttons {
  display: flex;
  gap: 8px;
  margin-top: 6px;
}
.preset-buttons .tox-button--ghost {
  flex: 1;
  font-size: 13px;
  padding: 8px;
}
/* Safe area: с fallback для редактора */
:root {
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

/* Верхняя панель и логотип с безопасными отступами */
.topbar {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 56px;
  padding-top: var(--safe-top);
  background: var(--bg, #0a0b0d);
  border-bottom: 1px solid var(--border, #1c1f26);
  display: flex; align-items: center; justify-content: center;
  z-index: 1000;
}
.tox-brand {
  font-weight: 900; font-size: 20px;
  background: linear-gradient(90deg, var(--neon-1, #5af1b0), var(--neon-2, #4bd1ff));
  -webkit-background-clip: text; color: transparent;
}

/* Контент учитывает верх/низ */
.content {
  padding-top: calc(56px + var(--safe-top));
  padding-bottom: calc(64px + var(--safe-bottom));
}

/* Нижняя навигация с safe area */
.mobile-nav {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  background: #101215;
  border-top: 1px solid var(--border, #1c1f26);
  display: flex; justify-content: space-around;
  padding: 8px 0;
  z-index: 1000;
  padding-bottom: var(--safe-bottom);
}
.mobile-nav__btn {
  flex: 1;
  background: none; border: none;
  color: var(--muted, #a0a6b3);
  font-size: 14px; font-weight: 700;
  padding: 8px 0;
}
.mobile-nav__btn.active { color: var(--neon-2, #4bd1ff); }

/* Мобильная адаптация: сетки, кнопки, формы */
@media (max-width: 768px) {
  .devices-grid { grid-template-columns: repeat(2, 1fr); }
  .card { border-radius: 14px; padding: 12px; }
  .tox-button { width: 100%; font-size: 15px; padding: 14px; }
  .tabs { flex-wrap: wrap; justify-content: center; gap: 6px; }
  .grid-title, .grid-subtitle { text-align: center; }
  .booking-grid { grid-template-columns: 1fr; }
}

/* Профиль */
.profile-header {
  display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 12px;
}
.profile-id { display: grid; gap: 4px; }
.profile-label { color: var(--muted, #a0a6b3); font-size: 12px; }
.profile-value { font-weight: 900; font-size: 18px; }

/* История броней */
.history-list { list-style: none; padding: 0; margin: 0; display: grid; gap: 8px; }
.history-item { display: flex; justify-content: space-between; border: 1px solid var(--border, #1c1f26); border-radius: 10px; padding: 10px; }
.history-label { font-weight: 700; }
.history-date { color: var(--muted, #a0a6b3); font-size: 12px; }

.muted { color: var(--muted, #a0a6b3); }

/* Тост-уведомления (с ARIA контейнером) */
.toast-container {
  position: fixed;
  bottom: calc(72px + var(--safe-bottom));
  left: 50%;
  transform: translateX(-50%);
  display: grid; gap: 8px;
  z-index: 2000;
}
.toast {
  opacity: 0;
  transform: translateY(8px);
  transition: opacity .2s ease, transform .2s ease;
  background: var(--surface, #0f1115);
  border: 1px solid var(--border, #1c1f26);
  color: var(--text, #e7ecf4);
  padding: 10px 12px;
  border-radius: 10px;
  font-size: 13px;
}
.toast--show {
  opacity: 1;
  transform: translateY(0);
}

/* Preset buttons для формы брони */
.preset-buttons {
  display: flex;
  gap: 8px;
  margin-top: 6px;
}
.preset-buttons .tox-button--ghost {
  flex: 1;
  font-size: 13px;
  padding: 8px;
}

/* Предпочтения по анимациям: уважать reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
  .toast, .loader-screen { animation: none !important; }
}
